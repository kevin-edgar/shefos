#!/bin/bash
#
#  Manjaro Linux Install (Manjaro Install) v1.1
#------------------------------------------|
#           :
# Author    : LinuxShef
#           :
# Project   : https://github.com/shefpower/manjaroinstall.git
#           :
# License   : LGPL-3.0 (http://opensource.org/licenses/lgpl-3.0.html)
#           :
#----------------------------------------------------------------------|
echo '









                                      𝗠𝗮𝗻𝗷𝗮𝗿𝗼 𝗜𝗻𝘀𝘁𝗮𝗹𝗹 𝘃.𝟭.𝟭
         ─────────────────────────────────────────────────────────────────────────


                 ██╗      ██████╗  █████╗ ██████╗ ██╗███╗   ██╗ ██████╗
                 ██║     ██╔═══██╗██╔══██╗██╔══██╗██║████╗  ██║██╔════╝
                 ██║     ██║   ██║███████║██║  ██║██║██╔██╗ ██║██║  ███╗
                 ██║     ██║   ██║██╔══██║██║  ██║██║██║╚██╗██║██║   ██║
                 ███████╗╚██████╔╝██║  ██║██████╔╝██║██║ ╚████║╚██████╔╝██╗██╗██╗
                 ╚══════╝ ╚═════╝ ╚═╝  ╚═╝╚═════╝ ╚═╝╚═╝  ╚═══╝ ╚═════╝ ╚═╝╚═╝╚═╝


         ─────────────────────────────────────────────────────────────────────────
'
sed -i s/'#en_US.UTF-8'/'en_US.UTF-8'/g /etc/locale.gen
sed -i s/'#ru_RU.UTF-8'/'ru_RU.UTF-8'/g /etc/locale.gen
chmod 777 /etc/locale.conf
chmod 777 /etc/vconsole.conf
echo 'LANG=ru_RU.UTF-8' > /etc/locale.conf
echo 'KEYMAP=ru' > /etc/vconsole.conf
echo 'FONT=cyr-sun16' >> /etc/vconsole.conf
chmod 644 /etc/locale.conf
chmod 644 /etc/vconsole.conf
setfont cyr-sun16
locale-gen >/dev/null 2>&1; RETVAL=$?
systemctl restart dhcpcd
dhcpcd
clear
echo '


   ───────────────────────────────────────────────────────────────────────────>
   ██████████████████  ████████
   ██████████████████  ████████
   ██████████████████  ████████
   ██████████████████  ████████
   ████████            ████████
   ████████  ████████  ████████
   ████████  ████████  ████████
   ████████  ████████  ████████      Добро пожаловать в программу установки Manjaro Install !
   ████████  ████████  ████████
   ████████  ████████  ████████
   ████████  ████████  ████████
   ████████  ████████  ████████
   ████████  ████████  ████████
   ████████  ████████  ████████
   ───────────────────────────────────────────────────────────────────────────────────────────>



                              Внимание !  скрипт НЕ создает разделы на диске , разделы вы


                           создаёте сами , поэтому если вы еще не создали разделы - создайте их



                       ───────────────────────────────────────────────────────────────────────────


'
    echo -e "

      \t                   -> Пропустить введите     1    "

    echo -e "

      \t                   -> Разметить диск введите   2     "

    echo -n "

                           -> Введите значение : "

      read main_menu
      case "$main_menu" in
         "1" ) clear
           ;;
         "2" ) clear ; echo '

















                        Добро пожаловать в меню раметки диска !

            . ────────────────────────────────────────────────────────────.
            .                                                             .
            .                                                             .
            .         Сейчас будет выведена информация о дисках           .
            .                                                             .
            .          Выберите тот диск который надо разметить           .
            .                                                             .
            .                                                             .
            .    ** Имя диска например ( sda , sdb, sdc , nvme0n1p ) **   .
            .                                                             .
            .                                                             .
            . ────────────────────────────────────────────────────────────.
'
sleep 2
read -t 99999 -n 1 -s -r -p "
                         -> Нажмите Enter для продолжения <- "
clear
fdisk -l

sleep 2
read -t 99999 -n 1 -s -r -p "
                         -> Нажмите Enter для продолжения <- "
clear
echo '

















              .─────────────────────────────────────────────────────────────.
              .                                                             .
              .                                                             .
              .             Введите имя диска для разметки                  .
              .                                                             .
              .                                                             .
              ──────────────────────────────────────────────────────────────
'
read -p "
                        -> Введите значение : " namedisk
cfdisk /dev/$namedisk
      esac
clear

echo '








                                    Настройка часового пояса

              .──────────────────────────────────────────────────────────────.
              .                                                              .
              .                                                              .
              .  Настройка региона выставляет часовой пояс и время согласно  .
              .                                                              .
              .                      указаному региону                       .
              .                                                              .
              .  Название региона можно посмотреть в списке регионов или     .
              .                                                              .
              .  ввести вручную , если уже знаете , именно в таком формате   .
              .                                                              .
              .                  Пример -->   /Europe/Moscow                 .
              .                                                              .
              .                                                              .
              .──────────────────────────────────────────────────────────────.

                              Выберите один из варинтов :

'
read -p "
                        -> Введите значение : " region

clear
echo '











                                       Выбор диска

            . ────────────────────────────────────────────────────────────.
            .                                                             .
            .                                                             .
            .  ** Это важно для дальнейщей установки загрузчика GRUB  **  .
            .                                                             .
            .                                                             .
            .         Сейчас будет выведена информация о дисках           .
            .                                                             .
            .   Выберите тот диск на который будет установлена система    .
            .                                                             .
            .            Например ( sda , sdb, sdc , nvme0n1p )           .
            .                                                             .
            .                                                             .
            . ────────────────────────────────────────────────────────────.
'
sleep 2
read -t 99999 -n 1 -s -r -p "
                         -> Нажмите Enter для продолжения <- "
clear
fdisk -l

sleep 2
read -t 99999 -n 1 -s -r -p "
                         -> Нажмите Enter для продолжения <- "

clear
echo '












                                      Выбор диска

              .─────────────────────────────────────────────────────────────.
              .                                                             .
              .                                                             .
              .             Введите имя диска для разметки                  .
              .                                                             .
              .   ** Это важно для дальнейщей установки загрузчика GRUB **  .
              .                                                             .
              .         Например ( sda , sdb, sdc , nvme0n1p )              .
              .                                                             .
              .                                                             .
              ──────────────────────────────────────────────────────────────.
'
read -p "
                        -> Введите значение : " disk
clear
echo '










                                      Выбор разделов

              .────────────────────────────────────────────────────────────.
              .                                                            .
              .                                                            .
              .             Введите одно из значений  1 или  2             .
              .                                                            .
              .           Для перехода к монтированию раздов диска         .
              .                                                            .
              .                                                            .
              .────────────────────────────────────────────────────────────.
'
    echo -e "

      \t             -> Смонтировать разделы введите    1   "

    echo -e "

      \t             -> Показать подсказку о разделах введите   2   "

    echo -n "

                       -> Введите значение : "

      read main_menu
      case "$main_menu" in
         "1" ) clear
           ;;
         "2" ) clear ;
fdisk -l
sleep 2
read -t 99999 -n 1 -s -r -p "
                         -> Нажмите Enter для продолжения <- "
      esac

echo '










                                        Выбор разделов

      .────────────────────────────────────────────────────────────────────────────────.
      .                                                                                .
      .                                                                                .
      .                             Введите разделы диска                              .
      .                                                                                .
      .             (Root- Корневой)  (Boot- Загрузочный) (Swap- Подкачка)             .
      .                                                                                .
      .                                                                                .
      .                  Например ( sda2, sdb2, sdc2 , nvme0n1p2 )                     .
      .                                                                                .
      .                                                                                .
      .   ** Внимание ! Если вы не создали swap или home то оставьте поле пустым **    .
      .                                                                                .
      .                                                                                .
      .────────────────────────────────────────────────────────────────────────────────.

'
read -p "
                                 -> Boot: " boot
read -p "
                                 -> Root: " root
read -p "
                                 -> Swap: " swap
read -p "
                                 -> Home: " home

clear
echo '












                          Выбор файловой системы Boot раздела

              .─────────────────────────────────────────────────────────────.
              .                                                             .
              .                                                             .
              .      Выберите файловую систему загрузочного  boot раздела   .
              .                                                             .
              .  Согласно вашей версии Bios (обычный стрый BIOS или UEFI)   .
              .                                                             .
              .   Для UEFI формат FAT32 . Для обычнго BIOS Ext4 или Ext2    .
              .                                                             .
              .                                                             .
              .─────────────────────────────────────────────────────────────.

                       -> Чтобы пропустить это шаг нажмите Enter <-
'
echo -e "\t

                       -> Для UEFI введите     1    "
echo -e "\t

                       -> Для обычного Bios без boot раздела ! введите    2    "
echo -e "\t


                       -> Для обычного Bios форматировать в Ext4 введите    3   "
echo -e "\t


                       -> Для обычного Bios фоматировать в Ext2 введиет    4   "
echo -n "

                           -> Введите значение : "
read main_menu
      case "$main_menu" in
         "1" ) clear ; mkfs.vfat -F32 /dev/$boot
         ;;
         "3" ) clear ; mkfs.ext4 /dev/$boot
         ;;
         "4" ) clear ; mkfs.ext2 /dev/$boot
         ;;
         "2" ) clear
      esac

clear
echo '












                         Выбор файловой системы корневого раздела

                .───────────────────────────────────────────────────────.
                .                                                       .
                .                                                       .
                .   Выберите файловую систему корневого Root раздела    .
                .                                                       .
                .                      Btrfs или Ext4                   .
                .                                                       .
                .                                                       .
                .───────────────────────────────────────────────────────.

                        -> Чтобы пропустить это шаг нажмите Enter <-
'
echo -e "\t

                        -> Форматировать в Btrfs введите    1    "
echo -e "\t


                        -> Форматировать в Ext4 введите    2    "
echo -n "

                            -> Введите значение : "
read main_menu
      case "$main_menu" in
         "1" ) clear ; mkfs.btrfs -f /dev/$root
         ;;
         "2" ) clear ; mkfs.ext4 /dev/$root
      esac

clear
mkswap /dev/$swap
swapon /dev/$swap

clear
echo '










                    Home раздел , выбор файловой системы Home раздела

                .───────────────────────────────────────────────────────.
                .                                                       .
                .                                                       .
                .       Выберите файловую систему Home раздела          .
                .                                                       .
                .                      Btrfs или Ext4                   .
                .                                                       .
                .                                                       .
                .───────────────────────────────────────────────────────.

                        -> Чтобы пропустить это шаг нажмите Enter <-
'
echo -e "\t

                        -> Форматировать в Btrfs введите    1    "
echo -e "\t


                        -> Форматировать в Ext4 введите    2    "
echo -n "

                            -> Введите значение : "
read main_menu
      case "$main_menu" in
         "1" ) clear ; mkfs.btrfs -f /dev/$home
         ;;
         "2" ) clear ; mkfs.ext4 /dev/$home
      esac

clear
echo '









                                 Монтирование разделов

                            и  домашнего ( home ) раздела

                 .───────────────────────────────────────────────────────.
                 .                                                       .
                 .                                                       .
                 .       Выберите один из вариантов монтирования         .
                 .                                                       .
                 .                                                       .
                 .───────────────────────────────────────────────────────.
'
echo -e "\t

                    -> Продолжить в Btrfs без home введите    1    "
echo -e "\t

                    -> Продолжить в Ext4 без home введите    2    "
echo -e "\t

                    -> Смонтировать Home введите    3    "

echo -n "

                      -> Введите значение : "

read main_menu
      case "$main_menu" in
        "1") clear ;
mount  /dev/$root /mnt

btrfs su cr /mnt/@

btrfs su cr /mnt/@home

btrfs su cr /mnt/@var

btrfs su cr /mnt/@var_log

btrfs su cr /mnt/@snapshots

umount /mnt

mount -o rw,noatime,compress=zstd:2,space_cache=v2,discard=async,subvol=@ /dev/$root /mnt

mkdir /mnt/{boot,home,var,var_log,.snapshots}

mount -o rw,noatime,compress=zstd:2,space_cache=v2,discard=async,subvol=@home  /dev/$root  /mnt/home

mount -o rw,noatime,compress=zstd:2,space_cache=v2,discard=async,subvol=@var  /dev/$root  /mnt/var

mount -o rw,noatime,compress=zstd:2,space_cache=v2,discard=async,subvol=@var_log /dev/$root /mnt/var_log

mount -o rw,noatime,compress=zstd:2,space_cache=v2,discard=async,subvol=@snapshots  /dev/$root  /mnt/.snapshots
         ;;
         "2" ) clear ;
mount  /dev/$root /mnt
mkdir /mnt/boot
        ;;
        "3" ) clear ;
clear
echo '












                          Выбор файловой системы Boot раздела

              .─────────────────────────────────────────────────────────────.
              .                                                             .
              .                                                             .
              .      Выберите файловую систему загрузочного  boot раздела   .
              .                                                             .
              .  Согласно вашей версии Bios (обычный стрый BIOS или UEFI)   .
              .                                                             .
              .   Для UEFI формат FAT32 . Для обычнго BIOS Ext4 или Ext2    .
              .                                                             .
              .                                                             .
              .─────────────────────────────────────────────────────────────.

                       -> Чтобы пропустить это шаг нажмите Enter <-
'
echo -e "\t

                       -> Для UEFI введите     1    "
echo -e "\t

                       -> Для обычного Bios без boot раздела ! введите    2    "
echo -e "\t


                       -> Для обычного Bios форматировать в Ext4 введите    3   "
echo -e "\t


                       -> Для обычного Bios фоматировать в Ext2 введиет    4   "
echo -n "

                           -> Введите значение : "
read main_menu
      case "$main_menu" in
         "1" ) clear ; mkfs.vfat -F32 /dev/$boot
         ;;
         "3" ) clear ; mkfs.ext4 /dev/$boot
         ;;
         "4" ) clear ; mkfs.ext2 /dev/$boot
         ;;
         "2" ) clear
      esac
echo '














                           Монтирование домашнего ( home ) раздела

                 .───────────────────────────────────────────────────────.
                 .                                                       .
                 .                                                       .
                 .       Выберите один из вариантов монтирования         .
                 .                                                       .
                 .                                                       .
                 .───────────────────────────────────────────────────────.
'
echo -e "\t

                     -> Смонтировать Home если выбрана Btrfs введите    1   "
echo -e "\t


                     -> Смонтировать Home если выбрана Ext4    2    "

echo -n "

                      -> Введите значение : "
read main_menu
      case "$main_menu" in
      "1" ) clear ;
mount  /dev/$root /mnt
btrfs su cr /mnt/@

btrfs su cr /mnt/@home

btrfs su cr /mnt/@var

btrfs su cr /mnt/@var_log

btrfs su cr /mnt/@snapshots

umount /mnt

mount -o rw,noatime,compress=zstd:2,space_cache=v2,discard=async,subvol=@ /dev/$root /mnt

mkdir /mnt/{boot,home,var,var_log,.snapshots}

mount -o rw,noatime,compress=zstd:2,space_cache=v2,discard=async,subvol=@home  /dev/$home  /mnt/home

mount -o rw,noatime,compress=zstd:2,space_cache=v2,discard=async,subvol=@var  /dev/$root  /mnt/var

mount -o rw,noatime,compress=zstd:2,space_cache=v2,discard=async,subvol=@var_log /dev/$root /mnt/var_log

mount -o rw,noatime,compress=zstd:2,space_cache=v2,discard=async,subvol=@snapshots  /dev/$root  /mnt/.snapshots
         ;;
         "2" ) clear ;
mount  /dev/$root /mnt
mkdir /mnt/home
mount /dev/$home /mnt/home
clear
      esac
       esac

clear
echo '












                              Монтирование boot раздела

              .─────────────────────────────────────────────────────────.
              .                                                          .
              .                                                          .
              .          Монтирование загрузочного раздела !             .
              .                                                          .
              .   Выберите один из варинтов монтирования boot раздела    .
              .                                                          .
              .       Для обычного биоса (НЕ UEFI) введите Bios          .
              .                                                          .
              .             Для UEFI биоса , введите Uefi                .
              .                                                          .
              .                                                          .
              .──────────────────────────────────────────────────────────.

                  -> Чтобы пропустить этот пункт нажмите Entr <-

'
echo -e "\t
                        -> Для UEFI или EFI введите    1    "
echo -e "\t

                        -> Для обычного Bios введите     2   "
echo -n "

                         -> Введите значение : "
read main_menu
      case "$main_menu" in
         "1" ) mkdir /mnt/boot/efi ; mount /dev/$boot /mnt/boot/efi
         ;;
         "2" ) mount /dev/$boot  /mnt/boot/
      esac

clear
echo '













                                        Парль root
                .───────────────────────────────────────────────────────────.
                .                                                           .
                .                                                           .
                .                   Укажите парль Root                      .
                .                                                           .
                .                                                           .
                .───────────────────────────────────────────────────────────.
'
read -p "
                    -> Введите пароль root :  " password
clear
echo '













                                Учетная запись пользователя
                .───────────────────────────────────────────────────────────.
                .                                                           .
                .                                                           .
                .           Введите имя вашей учетной записи !!!            .
                .                                                           .
                .                                                           .
                .───────────────────────────────────────────────────────────.
'
read -p "
                    -> Введите имя учетной записи :  " username
clear
echo '













                             Парль учетной записи пользователя
                .───────────────────────────────────────────────────────────.
                .                                                           .
                .                                                           .
                .           Укажите парль вашей учетной записи !!!          .
                .                                                           .
                .                                                           .
                .───────────────────────────────────────────────────────────.
'
read -p "
                    -> Введите пароль пользователя :  " userpassword
clear
#----------------------------------------------------------------------|
#                                                      #
#                         Pacman                       #
#                                                      #
#----------------------------------------------------------------------|
clear
sed -i "/\[multilib\]/,/Include/"'s/^#//' /etc/pacman.conf
sed -i s/'#ParallelDownloads = 5'/'ParallelDownloads = 5'/g /etc/pacman.conf
sed -i s/'#VerbosePkgLists'/'VerbosePkgLists'/g /etc/pacman.conf
sed -i s/'#Color'/'ILoveCandy'/g /etc/pacman.conf
echo '









───────────────────────────────────────────────────────────────|
──────────────────────
────────────────────── ██████╗  █████╗  ██████╗███╗   ███╗ █████╗ ███╗   ██╗
────────────────────── ██╔══██╗██╔══██╗██╔════╝████╗ ████║██╔══██╗████╗  ██║
──▒▒▒▒▒────▄████▄───── ██████╔╝███████║██║     ██╔████╔██║███████║██╔██╗ ██║
─▒─▄▒─▄▒──███▄█▀────── ██╔═══╝ ██╔══██║██║     ██║╚██╔╝██║██╔══██║██║╚██╗██║
─▒▒▒▒▒▒▒─▐████──█──█── ██║     ██║  ██║╚██████╗██║ ╚═╝ ██║██║  ██║██║ ╚████║
─▒▒▒▒▒▒▒──█████▄────── ╚═╝     ╚═╝  ╚═╝ ╚═════╝╚═╝     ╚═╝╚═╝  ╚═╝╚═╝  ╚═══╝
─▒─▒─▒─▒───▀████▀─────────────────────────────────────────────────────────────────|

                       Пожалуйста пдождите , идет настройка скачивания пакетов,

                                  это займет пару мнгновений ) .......

              ─────────────────────────────────────────────────────────────────────────────────────|
'
sleep 4

pacman-mirrors --fasttrack
pacman -Syy
pacman -Sy arch-install-scripts --noconfirm

basestrap -i /mnt base base-devel linux60 linux60-headers linux-firmware dosfstools btrfs-progs xf86-video-intel intel-ucode amd-ucode iucode-tool xf86-video-amdgpu xf86-video-nouveau archlinux-keyring manjaro-keyring cups bluez bluez-utils manjaro-tools-base nano --noconfirm

clear

fstabgen -U /mnt >> /mnt/etc/fstab
arch-chroot /mnt /bin/bash -c "ln -sf /usr/share/zoneinfo/$region /etc/localtime"
arch-chroot /mnt /bin/bash -c "hwclock --systohc"
arch-chroot /mnt /bin/bash -c "sed -i s/'#en_US.UTF-8'/'en_US.UTF-8'/g /etc/locale.gen"
arch-chroot /mnt /bin/bash -c "sed -i s/'#ru_RU.UTF-8'/'ru_RU.UTF-8'/g /etc/locale.gen"
arch-chroot /mnt /bin/bash -c "locale-gen"
arch-chroot /mnt /bin/bash -c "echo 'LANG=ru_RU.UTF-8' > /etc/locale.conf"
arch-chroot /mnt /bin/bash -c "echo 'KEYMAP=ru' > /etc/vconsole.conf"
arch-chroot /mnt /bin/bash -c "echo 'FONT=cyr-sun16' >> /etc/vconsole.conf"
arch-chroot /mnt /bin/bash -c "echo 'Manjaro' > /etc/hostname"
arch-chroot /mnt /bin/bash -c "echo '127.0.0.1 localhost' > /etc/hosts"
arch-chroot /mnt /bin/bash -c "echo '::1 localhost' >> /etc/hosts"
arch-chroot /mnt /bin/bash -c "echo '127.0.0.1 Manjaro.localdomain Manjaro' >> /etc/hosts"
arch-chroot /mnt /bin/bash -c "sed -i s/'#ParallelDownloads = 5'/'ParallelDownloads = 6'/g /etc/pacman.conf"
arch-chroot /mnt /bin/bash -c "sed -i s/'#VerbosePkgLists'/'VerbosePkgLists'/g /etc/pacman.conf"
arch-chroot /mnt /bin/bash -c "sed -i s/'#Color'/'ILoveCandy'/g /etc/pacman.conf"
arch-chroot /mnt /bin/bash -c "sed -i s/'# %wheel ALL=(ALL:ALL) ALL'/'%wheel ALL=(ALL:ALL) ALL'/g /etc/sudoers"
echo "root:$password" | arch-chroot /mnt chpasswd
arch-chroot /mnt /bin/bash -c "mkinitcpio -P"
arch-chroot /mnt /bin/bash -c "pacman -Syy networkmanager grub grub-btrfs efibootmgr dhcpcd dhclient --noconfirm"
arch-chroot /mnt /bin/bash -c "useradd -m -G wheel -s /bin/bash $username"
echo "$username:$userpassword" | arch-chroot /mnt chpasswd
arch-chroot /mnt /bin/bash -c "systemctl enable NetworkManager"
arch-chroot /mnt /bin/bash -c "grub-install /dev/$disk"
arch-chroot /mnt /bin/bash -c "grub-mkconfig -o /boot/grub/grub.cfg"

clear
echo '






                                     Драйвера видеокарты
              .─────────────────────────────────────────────────────────────────.
              .                                                                 .
              .                                                                 .
              .     Добро пожаловать в меню установки графических драйверов     .
              .                                                                 .
              .  На этом этапе будут установлены драйверы для вашей видеокарты  .
              .                                                                 .
              .      Далее вы попадете в меню выбора графических оболочек!      .
              .                                                                 .
              .                                                                 .
              .─────────────────────────────────────────────────────────────────.

                         > Чтобы пропустить этот этап нажмите Enter <
'
echo -e "\t
                          -> Для графики Intel введите ( 1 ) "
echo -e "\t
                          -> Для графики AMD введите ( 2)  "
echo -e "\t
                          -> Для графики Nvidia введите ( 3 ) "
echo -e "\t
                          -> Для графики Intel+Nvidia введите ( 4 ) "
echo -e "\t
                          -> Для графики Intel+AMD введите ( 5 ) "
echo -n "
                          -> Введите значение : "
read main_menu
      case "$main_menu" in
         "1" ) clear ; pacman -Syy ; basestrap -i /mnt mesa mesa-demos lib32-mesa vulkan-intel lib32-vulkan-intel vulkan-icd-loader lib32-vulkan-icd-loader network-manager-applet --noconfirm

        ;;
         "2" ) clear ; pacman -Syy ; basestrap -i /mnt mesa mesa-demos lib32-mesa vulkan-radeon lib32-vulkan-radeon vulkan-icd-loader lib32-vulkan-icd-loader network-manager-applet --noconfirm

        ;;
         "3" ) clear ; pacman -Syy ; basestrap -i /mnt mesa mesa-demos nvidia-dkms nvidia-utils lib32-nvidia-utils vulkan-icd-loader lib32-vulkan-icd-loader lib32-opencl-nvidia opencl-nvidia network-manager-applet --noconfirm

        ;;
         "4" ) clear ; pacman -Syy ; basestrap -i /mnt mesa mesa-demos lib32-mesa vulkan-intel lib32-vulkan-intel vulkan-icd-loader lib32-vulkan-icd-loader nvidia-dkms nvidia-utils lib32-nvidia-utils nvidia-settings vulkan-icd-loader lib32-vulkan-icd-loader lib32-opencl-nvidia opencl-nvidia network-manager-applet --noconfirm

        ;;
         "5" ) clear ; pacman -Syy ; basestrap -i /mnt mesa mesa-demos lib32-mesa vulkan-intel lib32-vulkan-intel vulkan-icd-loader lib32-vulkan-icd-loader vulkan-radeon lib32-vulkan-radeon vulkan-icd-loader lib32-vulkan-icd-loader network-manager-applet --noconfirm
      esac
#-----------------------------------

pacman -Syy

arch-chroot /mnt /bin/bash -c "pacman -Syyuu --noconfirm"

basestrap -i /mnt xorg xorg-server xdg-utils xorg-xinit xdg-user-dirs plasma sddm sddm-kcm konsole kmix dolphin nemo discover discover-snap manjaro-settings-manager manjaro-settings-manager-kcm manjaro-icons manjaro-printer print-manager kmix pavucontrol pipewire pipewire-jack pipewire-alsa pipewire-media-session flameshot kcalc ark screenfetch neofetch htop bpytop gnome-usage firefox gwenview dragon kwrite mousepad easyeffects conky gparted timeshift timeshift-autosnap-manjaro manjaro-input baobab libpamac libpamac-flatpak-plugin libpamac-snap-plugin pamac-cli pamac-gtk webapp-manager-manjaro noto-fonts-emoji ttf-font-awesome ttf-dejavu ttf-ubuntu-font-family libappimage appimagelauncher xapp-appimage-thumbnailer ffmpegthumbnailer ffmpegthumbs yay openvpn networkmanager-openvpn git wget cups manjaro-pipewire os-prober --noconfirm


#--------------------------------------

pacman -Syy

basestrap -i /mnt udisks2 gvfs-mtp gvfs-gphoto2 gvfs-afc gvfs-smb sshfs cups tumbler poppler-glib ffmpegthumbnailer freetype2 libgsf totem evince atril gnome-epub-thumbnailer file-roller file-roller unzip ntfs-3g imagemagick ffmpegthumbs --noconfirm


#-----------------------------------------


basestrap -i /mnt flac wavpack celt lame  a52dec  libdca  libmad  libmpcdec  opencore-amr opus  speex libvorbis faac faad2 libfdk-aac  fdkaac  jasper libwebp libavif  libheif aom dav1d rav1e svt-av1  libde265 libdv libmpeg2 schroedinger  libtheora  libvpx  x264 x265  xvidcore  mkvtoolnix-cli mkvtoolnix-gui  ogmtools gstreamer xine-lib gst-libav ffmpeg --noconfirm


#-------------------------------------

arch-chroot /mnt /bin/bash -c "grub-mkconfig -o /boot/grub/grub.cfg"
arch-chroot /mnt /bin/bash -c "systemctl enable bluetooth"
arch-chroot /mnt /bin/bash -c "systemctl enable sddm --force"


#----------------------------------------------------------------------|
#                                                      #
#                     Umount and Exit                  #
#                                                      #
#----------------------------------------------------------------------|
clear
echo '











──────────────────────────────────────────────────────────────>>
───────────────────────────>>
────────────────>>
 ☆┌─┐　─┐☆
　 │▒│ /▒/             Установка завершена успешно !
　 │▒│/▒/ ¡
　 │▒ /▒/─┬─┐
　 │▒│▒|▒│▒│
 ┌┴─┴─┐-┘─        Далее ваш компьютре будет перезагружен .
 │▒┌──┘▒▒▒
 └┐▒▒▒▒▒▒┌┘
　 └┐▒▒▒▒┌
─────────────────────────────────────────────────────────────────>>

'
sleep 5
arch-chroot /mnt /bin/bash -c "exit"
umount -R /mnt
reboot
